<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-icon-180x180.png"><link rel="icon" sizes="192x192" href="/assets/images/favicon/android-icon-192x192.png"><link rel="icon" sizes="32x32" href="/assets/images/favicon/favicon-32x32.pn"><link rel="icon" sizes="96x96" href="/assets/images/favicon/favicon-96x96.png"><link rel="icon" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png"><link rel="manifest" href="/assets/images/favicon/manifest.json"><link rel="msapplication-TileColor" content="#fffff"><link rel="msapplication-TileImage" href="/assets/images/favicon/ms-icon-144x144.png"><meta property="og:url" content="https://trading-bot.cassandre.tech"><meta property="og:title" content="Cassandre trading bot framework"><meta property="og:description" content="Cassandre is an open-source framework that makes it easy to create your Java crypto trading bot"><meta property="og:image" content="https://trading-bot.cassandre.tech/assets/images/social/cassandre-trading-bot-open-graph.png"><meta property="og:site_name" content="Cassandre"><meta name="twitter:title" content="Cassandre trading bot framework"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@cassandretech"><meta name="twitter:image:alt" content="Cassandre"><title>Écrivez le test de votre stratégie | Cassandre trading bot framework</title><meta name="description" content="Cassandre tutorial - Écrivez le test de votre stratégie">
    <link rel="modulepreload" href="/assets/app.485b305e.js"><link rel="modulepreload" href="/assets/write-strategy-unit-test.html.3f24a993.js"><link rel="modulepreload" href="/assets/write-strategy-unit-test.html.d0e591e0.js"><link rel="prefetch" href="/assets/index.html.38fac81f.js"><link rel="prefetch" href="/assets/architecture.html.1745bfb2.js"><link rel="prefetch" href="/assets/database-schema.html.b470a79e.js"><link rel="prefetch" href="/assets/dry-mode-and-backtesting.html.a32f09ef.js"><link rel="prefetch" href="/assets/features-and-roadmap.html.55e3980b.js"><link rel="prefetch" href="/assets/overview.html.b97ecfaf.js"><link rel="prefetch" href="/assets/strategy-configuration.html.f6cccc78.js"><link rel="prefetch" href="/assets/strategy-events.html.7d44c007.js"><link rel="prefetch" href="/assets/strategy-orders-management.html.8da3e05d.js"><link rel="prefetch" href="/assets/strategy-positions-management.html.bc25a369.js"><link rel="prefetch" href="/assets/what-is-a-strategy.html.db3f1b7a.js"><link rel="prefetch" href="/assets/index.html.300146c7.js"><link rel="prefetch" href="/assets/what-is-a-cryptocurrency.html.80313135.js"><link rel="prefetch" href="/assets/what-is-a-ticker.html.ef853e9e.js"><link rel="prefetch" href="/assets/what-is-an-account.html.fb468376.js"><link rel="prefetch" href="/assets/what-is-an-exchange.html.031cd7a3.js"><link rel="prefetch" href="/assets/what-is-an-order.html.dcea3431.js"><link rel="prefetch" href="/assets/what-is-trading.html.0a15d55a.js"><link rel="prefetch" href="/assets/api-configuration.html.aa99d725.js"><link rel="prefetch" href="/assets/create-your-project.html.2628331d.js"><link rel="prefetch" href="/assets/database-configuration.html.431c3036.js"><link rel="prefetch" href="/assets/exchange-configuration.html.a3d0d8d6.js"><link rel="prefetch" href="/assets/explore-generated-code.html.8e974610.js"><link rel="prefetch" href="/assets/write-strategy-unit-test.html.e0c03000.js"><link rel="prefetch" href="/assets/write-strategy.html.60257e33.js"><link rel="prefetch" href="/assets/architecture.html.1f860af8.js"><link rel="prefetch" href="/assets/database-schema.html.1265e552.js"><link rel="prefetch" href="/assets/dry-mode-and-backtesting.html.96b131b6.js"><link rel="prefetch" href="/assets/features-and-roadmap.html.f0c9237d.js"><link rel="prefetch" href="/assets/overview.html.388f243d.js"><link rel="prefetch" href="/assets/strategy-configuration.html.88e06839.js"><link rel="prefetch" href="/assets/strategy-events.html.bcec0a85.js"><link rel="prefetch" href="/assets/strategy-orders-management.html.ef9efab3.js"><link rel="prefetch" href="/assets/strategy-positions-management.html.4110a882.js"><link rel="prefetch" href="/assets/what-is-a-strategy.html.62745993.js"><link rel="prefetch" href="/assets/what-is-a-cryptocurrency.html.45c0fca0.js"><link rel="prefetch" href="/assets/what-is-a-ticker.html.9b8c63ab.js"><link rel="prefetch" href="/assets/what-is-an-account.html.21118e69.js"><link rel="prefetch" href="/assets/what-is-an-exchange.html.59229e5f.js"><link rel="prefetch" href="/assets/what-is-an-order.html.4d032a38.js"><link rel="prefetch" href="/assets/what-is-trading.html.af454850.js"><link rel="prefetch" href="/assets/api-configuration.html.6fcd626c.js"><link rel="prefetch" href="/assets/create-your-project.html.15f9faf4.js"><link rel="prefetch" href="/assets/database-configuration.html.42b7ea08.js"><link rel="prefetch" href="/assets/exchange-configuration.html.329b6fc5.js"><link rel="prefetch" href="/assets/explore-generated-code.html.127b8a86.js"><link rel="prefetch" href="/assets/write-strategy.html.cd3295b9.js"><link rel="prefetch" href="/assets/import-historical-data.html.42708cb0.js"><link rel="prefetch" href="/assets/exchange-connection-configuration.html.bafd7f16.js"><link rel="prefetch" href="/assets/how-to-fix-common-problems.html.caa613ee.js"><link rel="prefetch" href="/assets/how-to-build-from-sources.html.bfbb860c.js"><link rel="prefetch" href="/assets/how-to-create-a-release.html.f342b477.js"><link rel="prefetch" href="/assets/how-to-install-development-tools.html.cac8e05b.js"><link rel="prefetch" href="/assets/index.html.90df55ab.js"><link rel="prefetch" href="/assets/enums.html.cddc6fd3.js"><link rel="prefetch" href="/assets/objects.html.fe83b43f.js"><link rel="prefetch" href="/assets/queries.html.8de0ba7e.js"><link rel="prefetch" href="/assets/scalars.html.9788f699.js"><link rel="prefetch" href="/assets/import-historical-data.html.1988a1ba.js"><link rel="prefetch" href="/assets/exchange-connection-configuration.html.079d1013.js"><link rel="prefetch" href="/assets/how-to-fix-common-problems.html.c3b85b59.js"><link rel="prefetch" href="/assets/how-to-build-from-sources.html.b9516f69.js"><link rel="prefetch" href="/assets/how-to-create-a-release.html.562ab068.js"><link rel="prefetch" href="/assets/how-to-install-development-tools.html.d4f15e53.js"><link rel="prefetch" href="/assets/index.html.e868ec22.js"><link rel="prefetch" href="/assets/enums.html.ef27b315.js"><link rel="prefetch" href="/assets/objects.html.29c684de.js"><link rel="prefetch" href="/assets/queries.html.eeb5212c.js"><link rel="prefetch" href="/assets/scalars.html.a62a77f8.js"><link rel="prefetch" href="/assets/404.html.f166316b.js"><link rel="prefetch" href="/assets/index.html.f5461327.js"><link rel="prefetch" href="/assets/architecture.html.f7060f5c.js"><link rel="prefetch" href="/assets/database-schema.html.081c9342.js"><link rel="prefetch" href="/assets/dry-mode-and-backtesting.html.01e35c3f.js"><link rel="prefetch" href="/assets/features-and-roadmap.html.ef5c7864.js"><link rel="prefetch" href="/assets/overview.html.ae1993d1.js"><link rel="prefetch" href="/assets/strategy-configuration.html.00d75abf.js"><link rel="prefetch" href="/assets/strategy-events.html.b69df3fb.js"><link rel="prefetch" href="/assets/strategy-orders-management.html.a5faa124.js"><link rel="prefetch" href="/assets/strategy-positions-management.html.67f86760.js"><link rel="prefetch" href="/assets/what-is-a-strategy.html.6f0c5dc4.js"><link rel="prefetch" href="/assets/index.html.58264f3a.js"><link rel="prefetch" href="/assets/what-is-a-cryptocurrency.html.d62bee3e.js"><link rel="prefetch" href="/assets/what-is-a-ticker.html.616190e2.js"><link rel="prefetch" href="/assets/what-is-an-account.html.8d8f5395.js"><link rel="prefetch" href="/assets/what-is-an-exchange.html.ef2c654a.js"><link rel="prefetch" href="/assets/what-is-an-order.html.b94cf9be.js"><link rel="prefetch" href="/assets/what-is-trading.html.d4d0a244.js"><link rel="prefetch" href="/assets/api-configuration.html.bc63fcd5.js"><link rel="prefetch" href="/assets/create-your-project.html.4fb13e8a.js"><link rel="prefetch" href="/assets/database-configuration.html.07a05a55.js"><link rel="prefetch" href="/assets/exchange-configuration.html.0f865fc8.js"><link rel="prefetch" href="/assets/explore-generated-code.html.dd7665df.js"><link rel="prefetch" href="/assets/write-strategy-unit-test.html.1489098d.js"><link rel="prefetch" href="/assets/write-strategy.html.7752fe09.js"><link rel="prefetch" href="/assets/architecture.html.31c30a68.js"><link rel="prefetch" href="/assets/database-schema.html.712efcdf.js"><link rel="prefetch" href="/assets/dry-mode-and-backtesting.html.10e9d8ec.js"><link rel="prefetch" href="/assets/features-and-roadmap.html.29e6409f.js"><link rel="prefetch" href="/assets/overview.html.07b83849.js"><link rel="prefetch" href="/assets/strategy-configuration.html.82985dec.js"><link rel="prefetch" href="/assets/strategy-events.html.0b8f9c12.js"><link rel="prefetch" href="/assets/strategy-orders-management.html.21e2e060.js"><link rel="prefetch" href="/assets/strategy-positions-management.html.fad37156.js"><link rel="prefetch" href="/assets/what-is-a-strategy.html.61ae99ce.js"><link rel="prefetch" href="/assets/what-is-a-cryptocurrency.html.8ca4e613.js"><link rel="prefetch" href="/assets/what-is-a-ticker.html.caf43b5e.js"><link rel="prefetch" href="/assets/what-is-an-account.html.725a12bb.js"><link rel="prefetch" href="/assets/what-is-an-exchange.html.9262c8f9.js"><link rel="prefetch" href="/assets/what-is-an-order.html.a09e8057.js"><link rel="prefetch" href="/assets/what-is-trading.html.09b7db96.js"><link rel="prefetch" href="/assets/api-configuration.html.3e9d33d5.js"><link rel="prefetch" href="/assets/create-your-project.html.bcb0d271.js"><link rel="prefetch" href="/assets/database-configuration.html.40069736.js"><link rel="prefetch" href="/assets/exchange-configuration.html.7e2bb31c.js"><link rel="prefetch" href="/assets/explore-generated-code.html.c1ee5d10.js"><link rel="prefetch" href="/assets/write-strategy.html.2d469f8f.js"><link rel="prefetch" href="/assets/import-historical-data.html.3a6bd4db.js"><link rel="prefetch" href="/assets/exchange-connection-configuration.html.16656088.js"><link rel="prefetch" href="/assets/how-to-fix-common-problems.html.a675276c.js"><link rel="prefetch" href="/assets/how-to-build-from-sources.html.652e04cd.js"><link rel="prefetch" href="/assets/how-to-create-a-release.html.f8d45aed.js"><link rel="prefetch" href="/assets/how-to-install-development-tools.html.91482a46.js"><link rel="prefetch" href="/assets/index.html.3d5f8e66.js"><link rel="prefetch" href="/assets/enums.html.a454bf38.js"><link rel="prefetch" href="/assets/objects.html.b2241066.js"><link rel="prefetch" href="/assets/queries.html.f1223df9.js"><link rel="prefetch" href="/assets/scalars.html.80a66803.js"><link rel="prefetch" href="/assets/import-historical-data.html.be4fa323.js"><link rel="prefetch" href="/assets/exchange-connection-configuration.html.5572cf8b.js"><link rel="prefetch" href="/assets/how-to-fix-common-problems.html.f592e26d.js"><link rel="prefetch" href="/assets/how-to-build-from-sources.html.c73f5ba1.js"><link rel="prefetch" href="/assets/how-to-create-a-release.html.9c6f5258.js"><link rel="prefetch" href="/assets/how-to-install-development-tools.html.d9147cb8.js"><link rel="prefetch" href="/assets/index.html.aa0edbd6.js"><link rel="prefetch" href="/assets/enums.html.35879f13.js"><link rel="prefetch" href="/assets/objects.html.29b98fae.js"><link rel="prefetch" href="/assets/queries.html.447e51fc.js"><link rel="prefetch" href="/assets/scalars.html.828fca59.js"><link rel="prefetch" href="/assets/404.html.4d599e8a.js"><link rel="prefetch" href="/assets/404.b80019f0.js"><link rel="prefetch" href="/assets/Layout.ad71ffff.js">
    <link rel="stylesheet" href="/assets/style.3ac1bbff.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/fr/" class=""><!----><span class="site-name can-hide">Cassandre trading bot framework</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/fr/" class="" aria-label="Accueil"><!--[--><!--]--> Accueil <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/trading_basics/what-is-trading" class="" aria-label="Bases du trading"><!--[--><!--]--> Bases du trading <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/cassandre_basics/overview" class="" aria-label="Bases de Cassandre"><!--[--><!--]--> Bases de Cassandre <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/tutorial/create-your-project" class="" aria-label="Tutorial"><!--[--><!--]--> Tutorial <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Configuration</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/configuration/how-to-fix-common-problems" class="" aria-label="Problèmes courants"><!--[--><!--]--> Problèmes courants <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/configuration/exchange-connection-configuration" class="" aria-label="Exchange configuration"><!--[--><!--]--> Exchange configuration <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Fonctionnalités avancées</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/advanced_usage/import-historical-data" class="" aria-label="Import de données au démarrage"><!--[--><!--]--> Import de données au démarrage <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Contributeur</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-install-development-tools" class="" aria-label="Installer les outils de dev"><!--[--><!--]--> Installer les outils de dev <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-build-from-sources" class="" aria-label="Construire les sources"><!--[--><!--]--> Construire les sources <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-create-a-release" class="" aria-label="Créer une version"><!--[--><!--]--> Créer une version <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Contact &amp; news"><span class="title">Contact &amp; news</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Contact &amp; news"><span class="title">Contact &amp; news</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="mailto:contact@cassandre.tech" aria-label="Email"><!--[--><!--]--> Email <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://twitter.com/CassandreTech" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--> Twitter <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://discord.gg/sv3VXuTgFS" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://cassandre.substack.com" rel="noopener noreferrer" target="_blank" aria-label="Lettre d&#39;information"><!--[--><!--]--> Lettre d&#39;information <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cassandre-tech/cassandre-trading-bot" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Langues</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Langues</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tutorial/write-strategy-unit-test.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/fr/" class="" aria-label="Accueil"><!--[--><!--]--> Accueil <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/trading_basics/what-is-trading" class="" aria-label="Bases du trading"><!--[--><!--]--> Bases du trading <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/cassandre_basics/overview" class="" aria-label="Bases de Cassandre"><!--[--><!--]--> Bases de Cassandre <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/tutorial/create-your-project" class="" aria-label="Tutorial"><!--[--><!--]--> Tutorial <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Configuration</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/configuration/how-to-fix-common-problems" class="" aria-label="Problèmes courants"><!--[--><!--]--> Problèmes courants <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/configuration/exchange-connection-configuration" class="" aria-label="Exchange configuration"><!--[--><!--]--> Exchange configuration <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Fonctionnalités avancées</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/advanced_usage/import-historical-data" class="" aria-label="Import de données au démarrage"><!--[--><!--]--> Import de données au démarrage <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Contributeur</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-install-development-tools" class="" aria-label="Installer les outils de dev"><!--[--><!--]--> Installer les outils de dev <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-build-from-sources" class="" aria-label="Construire les sources"><!--[--><!--]--> Construire les sources <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/fr/guides/contributor/how-to-create-a-release" class="" aria-label="Créer une version"><!--[--><!--]--> Créer une version <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Contact &amp; news"><span class="title">Contact &amp; news</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Contact &amp; news"><span class="title">Contact &amp; news</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="mailto:contact@cassandre.tech" aria-label="Email"><!--[--><!--]--> Email <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://twitter.com/CassandreTech" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--> Twitter <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://discord.gg/sv3VXuTgFS" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://cassandre.substack.com" rel="noopener noreferrer" target="_blank" aria-label="Lettre d&#39;information"><!--[--><!--]--> Lettre d&#39;information <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cassandre-tech/cassandre-trading-bot" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Langues</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Langues</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tutorial/write-strategy-unit-test.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Tutorial <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/tutorial/create-your-project.html" class="sidebar-item" aria-label="Créez votre project Cassandre"><!--[--><!--]--> Créez votre project Cassandre <!--[--><!--]--></a><!----></li><li><a href="/fr/tutorial/explore-generated-code.html" class="sidebar-item" aria-label="Explorez le code généré"><!--[--><!--]--> Explorez le code généré <!--[--><!--]--></a><!----></li><li><a href="/fr/tutorial/write-strategy.html" class="sidebar-item" aria-label="Écrivez votre stratégie"><!--[--><!--]--> Écrivez votre stratégie <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Écrivez le test de votre stratégie"><!--[--><!--]--> Écrivez le test de votre stratégie <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html#qu-est-ce-que-nous-voulons-faire" class="router-link-active router-link-exact-active sidebar-item" aria-label="Qu&#39;est-ce que nous voulons faire ?"><!--[--><!--]--> Qu&#39;est-ce que nous voulons faire ? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html#configurez-vos-comptes" class="router-link-active router-link-exact-active sidebar-item" aria-label="Configurez vos comptes."><!--[--><!--]--> Configurez vos comptes. <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html#telechargez-un-historique-de-donnees-de-marche" class="router-link-active router-link-exact-active sidebar-item" aria-label="Téléchargez un historique de données de marché"><!--[--><!--]--> Téléchargez un historique de données de marché <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html#ecrivez-votre-test" class="router-link-active router-link-exact-active sidebar-item" aria-label="Écrivez votre test"><!--[--><!--]--> Écrivez votre test <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/tutorial/write-strategy-unit-test.html#lancez-vos-tests" class="router-link-active router-link-exact-active sidebar-item" aria-label="Lancez vos tests"><!--[--><!--]--> Lancez vos tests <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/fr/tutorial/exchange-configuration.html" class="sidebar-item" aria-label="Configuration de l&#39;exchange"><!--[--><!--]--> Configuration de l&#39;exchange <!--[--><!--]--></a><!----></li><li><a href="/fr/tutorial/database-configuration.html" class="sidebar-item" aria-label="Configuration de la base de données"><!--[--><!--]--> Configuration de la base de données <!--[--><!--]--></a><!----></li><li><a href="/fr/tutorial/api-configuration.html" class="sidebar-item" aria-label="Configuration de l&#39;API"><!--[--><!--]--> Configuration de l&#39;API <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ecrivez-le-test-de-votre-strategie" tabindex="-1"><a class="header-anchor" href="#ecrivez-le-test-de-votre-strategie" aria-hidden="true">#</a> Écrivez le test de votre stratégie</h1><h2 id="qu-est-ce-que-nous-voulons-faire" tabindex="-1"><a class="header-anchor" href="#qu-est-ce-que-nous-voulons-faire" aria-hidden="true">#</a> Qu&#39;est-ce que nous voulons faire ?</h2><p>Notre objectif est de vérifier que notre stratégie génère des gains. Comme nous ne pouvons pas prédire le futur, nous allons tester notre stratégie sur des données historiques et avec un exchange &quot;simulé&quot; fourni par Cassandre (Notre <a href="/fr/cassandre_basics/dry-mode-and-backtesting.html" class="">dry mode</a>).</p><p>Il y a trois étapes :</p><ul><li>Configurez les montants d&#39;actifs que vous utilisez pendant les tests.</li><li>Téléchargez et importer les données historiques pour que Cassandre les envoie à votre stratégie.</li><li>Écrivez le test unitaire qui vérifie les gains réalisés quand tous les tickers auront été traitées par votre stratégie.</li></ul><h2 id="configurez-vos-comptes" tabindex="-1"><a class="header-anchor" href="#configurez-vos-comptes" aria-hidden="true">#</a> Configurez vos comptes.</h2><p>Pour simuler correctement le comportement de votre stratégie, vous avez besoin de dire au mode dry de Cassandre de combien d&#39;actifs vous allez disposer pour prendre vos positions.</p><p>Ceci se fait en créant des fichiers CSV commençant par <code>user-</code> et finissant par <code>csv</code> dans le répertoire <code>src/test/resources</code>.</p><p>Si vous ouvrez le fichier <code>src/test/resources/user-trade.csv</code>, vous verrez :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>BTC,0.99962937
USDT,1000
ETH,10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Grâce à ce fichier, quand Cassandre démarrera en mode &quot;dry&quot;, votre stratégie agira comme si l&#39;exchange lui avait dit que votre compte avait 0,99962937 BTC, 1 000 USDT et 10 ETH. Bien sûr, lors du test de votre stratégie, ces montants évolueront automatiquement en fonction de vos achats/ventes.</p><h2 id="telechargez-un-historique-de-donnees-de-marche" tabindex="-1"><a class="header-anchor" href="#telechargez-un-historique-de-donnees-de-marche" aria-hidden="true">#</a> Téléchargez un historique de données de marché</h2><p>Comme je l&#39;ai indiqué un peu plus haut, nous allons tester le comportement de notre stratégie sur un historique de données. Pour ce faire, nous devons mettre les données que nous voulons utiliser dans des fichiers commençant par <code>candles-for-backtesting</code>, finissant par <code>.csv</code> et se trouvant dans le dossier <code>src/test/resources/</code>.</p><p>Voici un exemple du contenu d&#39;un de ses fichiers :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;TIMESTAMP&quot;,&quot;OPEN&quot;,&quot;CLOSE&quot;,&quot;HIGH&quot;,&quot;LOW&quot;,&quot;VOLUME&quot;,&quot;QUOTE_VOLUME&quot;,&quot;CURRENCY_PAIR&quot;
&quot;1508371200&quot;,&quot;10000&quot;,&quot;10000&quot;,&quot;10000&quot;,&quot;10000&quot;,&quot;10000&quot;,&quot;10000&quot;,&quot;BTC-USDT&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Vous pouvez bien sûr créer ces fichiers avec les outils/sources de données de votre choix, mais voici comment je le fais facilement, rapidement et en ligne de commande :</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">SYMBOL</span><span class="token operator">=</span>BTC-USDT
<span class="token assign-left variable">START_DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --date<span class="token operator">=</span><span class="token string">&quot;3 months ago&quot;</span> +<span class="token string">&quot;%s&quot;</span><span class="token variable">`</span></span>
<span class="token assign-left variable">END_DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +<span class="token string">&quot;%s&quot;</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;&quot;TIMESTAMP&quot;, &quot;OPEN&quot;, &quot;CLOSE&quot;, &quot;HIGH&quot;, &quot;LOW&quot;, &quot;VOLUME&quot;, &quot;QUOTE_VOLUME&quot;, &quot;CURRENCY_PAIR&quot;&#39;</span> <span class="token operator">&gt;</span> src/test/resources/candles-for-backtesting-btc-usdt.csv
<span class="token function">curl</span> -s <span class="token string">&quot;https://api.kucoin.com/api/v1/market/candles?type=15min&amp;symbol=<span class="token variable">${SYMBOL}</span>&amp;startAt=<span class="token variable">${START_DATE}</span>&amp;endAt=<span class="token variable">${END_DATE}</span>&quot;</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> jq --arg SYMBOL <span class="token string">&quot;<span class="token variable">$SYMBOL</span>&quot;</span> -r -c <span class="token string">&#39;.data[] | . + [$SYMBOL] | @csv&#39;</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">tac</span> <span class="token variable">$1</span> <span class="token operator">&gt;&gt;</span> src/test/resources/candles-for-backtesting-btc-usdt.csv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Vous pouvez ajouter autant de fichiers de backtesting que vous voulez.</p></div><h2 id="ecrivez-votre-test" tabindex="-1"><a class="header-anchor" href="#ecrivez-votre-test" aria-hidden="true">#</a> Écrivez votre test</h2><p>Le code du test est assez facile à comprendre :</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@ActiveProfiles</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">TickerFluxMock</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;Simple strategy test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ETHStrategyTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">TickerFluxMock</span> tickerFluxMock<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** Dumb strategy. */</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ETHStrategy</span> strategy<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Check data reception.
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;Check data reception&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receivedData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> tickerFluxMock<span class="token punctuation">.</span><span class="token function">isFluxDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// =============================================================================================================</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Gains by position&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">getPositions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>positionDTO <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>positionDTO<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">PositionStatusDTO</span><span class="token punctuation">.</span>CLOSED<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Position &quot;</span> <span class="token operator">+</span> positionDTO<span class="token punctuation">.</span><span class="token function">getPositionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; closed with gain: &quot;</span> <span class="token operator">+</span> positionDTO<span class="token punctuation">.</span><span class="token function">getGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Position &quot;</span> <span class="token operator">+</span> positionDTO<span class="token punctuation">.</span><span class="token function">getPositionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; NOT closed with latest gain: &quot;</span> <span class="token operator">+</span> positionDTO<span class="token punctuation">.</span><span class="token function">getLatestCalculatedGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// =============================================================================================================</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Global gains&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CurrencyDTO</span><span class="token punctuation">,</span> <span class="token class-name">GainDTO</span><span class="token punctuation">&gt;</span></span> gains <span class="token operator">=</span> strategy<span class="token punctuation">.</span><span class="token function">getGains</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gains<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>gainDTO <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gainDTO<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertFalse</span><span class="token punctuation">(</span>gains<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Failure, no gains&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>gains<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>USDT<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Failure, USDT gains&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertTrue</span><span class="token punctuation">(</span>gains<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>USDT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isSuperiorTo</span><span class="token punctuation">(</span><span class="token class-name">GainDTO</span><span class="token punctuation">.</span>ZERO<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Failure, USDT inferior to zero&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Voici les principaux points :</p><ul><li>Il s&#39;agit d&#39;un test spring boot classique.</li><li>Ajouter <code>@Import(TickerFluxMock.class)</code> fait en sorte que Cassandre charge les données de backtesting et les envois à vos stratégies.</li><li><code>private TickerFluxMock tickerFluxMock;</code> a été ajouté pour que l&#39;on soit capable de savoir quand toutes les données ont été traitées.</li><li>En utilisant <code>await().forever().until(() -&gt; tickerFluxMock.isFluxDone());</code>, on fait en sorte que le test attende que tout soit traité par les stratégies.</li><li>On finit par afficher l&#39;état de chaque position puis on test les valeurs des gains pour voir si on en a bien réalisé !</li></ul><h2 id="lancez-vos-tests" tabindex="-1"><a class="header-anchor" href="#lancez-vos-tests" aria-hidden="true">#</a> Lancez vos tests</h2><p>Pour lancer les tests, il suffit de taper : <code>mvn test</code>.</p><p>Voici un exemple de résultat :</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Gains by position
Position <span class="token number">1</span> closed with gain: Gains: -3.170296 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">2</span> closed with gain: Gains: -3.170208 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">3</span> closed with gain: Gains: -3.168264 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">4</span> closed with gain: Gains: -3.165088 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">5</span> closed with gain: Gains: -3.164112 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">6</span> closed with gain: Gains: -3.162976 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">7</span> closed with gain: Gains: -3.15744 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">8</span> closed with gain: Gains: -3.1594 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">9</span> closed with gain: Gains: -3.15688 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">10</span> closed with gain: Gains: -3.150648 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">11</span> closed with gain: Gains: -3.13744 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
Position <span class="token number">12</span> closed with gain: Gains: -3.11872 USDT <span class="token punctuation">(</span>-8.0 %<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
osition <span class="token number">120</span> closed with gain: Gains: <span class="token number">1.114808</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">121</span> closed with gain: Gains: <span class="token number">1.141692</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">122</span> closed with gain: Gains: <span class="token number">1.133536</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">123</span> closed with gain: Gains: <span class="token number">1.124956</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">124</span> closed with gain: Gains: <span class="token number">1.128588</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">125</span> closed with gain: Gains: <span class="token number">1.17594</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">126</span> closed with gain: Gains: <span class="token number">1.163032</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">127</span> closed with gain: Gains: <span class="token number">1.145548</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">128</span> closed with gain: Gains: <span class="token number">1.143424</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">129</span> closed with gain: Gains: <span class="token number">1.141428</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">130</span> closed with gain: Gains: <span class="token number">1.133732</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">131</span> closed with gain: Gains: <span class="token number">1.14464</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">132</span> closed with gain: Gains: <span class="token number">1.140584</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">133</span> closed with gain: Gains: <span class="token number">1.130728</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">134</span> closed with gain: Gains: <span class="token number">1.156604</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">135</span> closed with gain: Gains: <span class="token number">1.177412</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">136</span> closed with gain: Gains: <span class="token number">1.173072</span> USDT <span class="token punctuation">(</span><span class="token number">4.0</span> %<span class="token punctuation">)</span>
Position <span class="token number">137</span> NOT closed with latest gain: Gains: -0.6901 USDT <span class="token punctuation">(</span>-2.2868640422821045 %<span class="token punctuation">)</span>
Position <span class="token number">138</span> NOT closed with latest gain: Gains: -0.956 USDT <span class="token punctuation">(</span>-3.1403369903564453 %<span class="token punctuation">)</span>
Position <span class="token number">139</span> NOT closed with latest gain: Gains: -0.8586 USDT <span class="token punctuation">(</span>-2.8294429779052734 %<span class="token punctuation">)</span>
Position <span class="token number">140</span> NOT closed with latest gain: Gains: -0.7031 USDT <span class="token punctuation">(</span>-2.3289411067962646 %<span class="token punctuation">)</span>
Position <span class="token number">141</span> NOT closed with latest gain: Gains: -1.2125 USDT <span class="token punctuation">(</span>-3.9496281147003174 %<span class="token punctuation">)</span>
Position <span class="token number">142</span> NOT closed with latest gain: Gains: -1.1565 USDT <span class="token punctuation">(</span>-3.7740960121154785 %<span class="token punctuation">)</span>
Position <span class="token number">143</span> NOT closed with latest gain: Gains: -1.0674 USDT <span class="token punctuation">(</span>-3.4934868812561035 %<span class="token punctuation">)</span>
Position <span class="token number">144</span> NOT closed with latest gain: Gains: -0.5626 USDT <span class="token punctuation">(</span>-1.8538539409637451 %<span class="token punctuation">)</span>
Position <span class="token number">145</span> NOT closed with latest gain: Gains: -0.5489 USDT <span class="token punctuation">(</span>-1.809527039527893 %<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
Global gains
-191.903428 USDT
<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Tests run: <span class="token number">1</span>, Failures: <span class="token number">1</span>, Errors: <span class="token number">0</span>, Skipped: <span class="token number">0</span>, Time elapsed: <span class="token number">348.345</span> s <span class="token operator">&lt;&lt;&lt;</span> FAILURE<span class="token operator">!</span> - <span class="token keyword">in</span> com.mycompany.bot.SimpleStrategyTest
<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> receivedData  Time elapsed: <span class="token number">339.607</span> s  <span class="token operator">&lt;&lt;&lt;</span> FAILURE<span class="token operator">!</span>
org.opentest4j.AssertionFailedError: Failure, USDT inferior to zero <span class="token punctuation">(</span>eg loss<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">&gt;</span> expected: <span class="token operator">&lt;</span>true<span class="token operator">&gt;</span> but was: <span class="token operator">&lt;</span>false<span class="token operator">&gt;</span>
	at com.mycompany.bot.SimpleStrategyTest.receivedData<span class="token punctuation">(</span>SimpleStrategyTest.java:67<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Comme vous pouvez le constater, ce n&#39;est pas une très bonne stratégie !</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/fr/tutorial/write-strategy.html" class="" aria-label="Écrivez votre stratégie"><!--[--><!--]--> Écrivez votre stratégie <!--[--><!--]--></a></span><span class="next"><a href="/fr/tutorial/exchange-configuration.html" class="" aria-label="Configuration de l&#39;exchange"><!--[--><!--]--> Configuration de l&#39;exchange <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.485b305e.js" defer></script>
  </body>
</html>
